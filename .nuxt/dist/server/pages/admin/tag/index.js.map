{"version":3,"file":"pages/admin/tag/index.js","sources":["webpack:///./pages/admin/tag/index.vue?e33c","webpack:///./pages/admin/tag/index.vue?277d","webpack:///./pages/admin/tag/index.vue?e248","webpack:///./pages/admin/tag/index.vue?4dd4","webpack:///./pages/admin/tag/index.vue","webpack:///./pages/admin/tag/index.vue?4085","webpack:///./pages/admin/tag/index.vue?28e8"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=279bd83c&scoped=true&lang=less&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"8ff119c8\", content, true, context)\n};","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=279bd83c&scoped=true&lang=less&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tags-admin-page[data-v-279bd83c] .el-table__expanded-cell{padding:0 40px}.tags-admin-page .articles-wrap[data-v-279bd83c]{list-style:none}.tags-admin-page .articles-wrap .article-item[data-v-279bd83c]{display:flex;align-items:center;padding:10px 0}.tags-admin-page .articles-wrap .article-item .article-title[data-v-279bd83c]{margin-right:20px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tags-admin-page\"},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.openOperateTagDialog()}}},[_vm._v(\"添加\")]),_vm._ssrNode(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tags,\"row-key\":function (row) { return row._id; }},on:{\"expand-change\":_vm.expandChange}},_vm._l((_vm.columns),function(column){return _c('el-table-column',{key:column.field,attrs:{\"prop\":column.field,\"label\":column.label,\"width\":column.width,\"type\":column.type},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(column['slot'] === 'expand')?_c('ul',{staticClass:\"articles-wrap\"},_vm._l((scope.row['articles']),function(article){return _c('li',{key:article._id,staticClass:\"article-item\"},[_c('span',{staticClass:\"article-title\"},[_vm._v(_vm._s(article.title))])])}),0):(column['slot'] === 'createUser')?_c('div',[_vm._v(\"\\n          \"+_vm._s(scope.row[column['field']].username)+\"\\n        \")]):(column['slot'] === 'createTime')?_c('div',[_c('span',{directives:[{name:\"time\",rawName:\"v-time\",value:(scope.row[column['field']]),expression:\"scope.row[column['field']]\"}]})]):(column['slot'] === 'operate')?_c('div',[_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.openOperateTagDialog(scope.row)}}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.openDeleteTagDialog(scope.row)}}})],1):_c('div',[_vm._v(_vm._s(scope.row[column['field']]))])]}}],null,true)})}),1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapActions } from 'vuex';\n\nexport default {\n  name: 'TagPage',\n  head: {\n    title: '标签管理',\n    titleTemplate: '%s - DJL箫氏的博客!',\n    htmlAttrs: {\n      lang: 'en',\n      amp: true\n    },\n    meta: [\n      {\n        hid: 'description',\n        name: 'description',\n        content: '这是DJL箫氏的博客-标签设置页面'\n      }\n    ]\n  },\n  components: {},\n  data() {\n    return {\n      currentTag: {},\n      expandRowKeys: [],\n      columns: [\n        { type: 'expand', slot: 'expand' },\n        { label: '名称', field: 'label' },\n        {\n          label: '创建时间',\n          width: 180,\n          field: 'createTime',\n          slot: 'createTime'\n        },\n        { label: '创建者', field: 'createUser', slot: 'createUser' },\n        { label: '操作', width: 200, slot: 'operate' }\n      ],\n      tags: []\n    };\n  },\n  mounted() {\n    this.getAllTags();\n  },\n  methods: {\n    ...mapActions({\n      getArticleByTagId: 'article/getArticlesByTagId'\n    }),\n    getAllTags() {\n      const { response } = this.$http({\n        url: `/getAllTagsByUser`,\n        method: 'get',\n        showSuccessMsg: false,\n        showErrorMsg: true\n      });\n\n      return response.then(\n        (tags) => {\n          this.tags = tags;\n        },\n        (e) => {\n          return e;\n        }\n      );\n    },\n    goToTagDetails(tag) {\n      this.$router.push(`/tag/${tag._id}`);\n    },\n    openOperateTagDialog(tag) {\n      this.currentTag = tag;\n      this.$alert('输入标签名', {\n        buttons: {\n          cancel: {\n            text: '取消',\n            value: null,\n            visible: true,\n            closeModal: true\n          },\n          confirm: {\n            text: '保存',\n            value: null,\n            visible: true,\n            closeModal: true\n          }\n        },\n        content: {\n          element: 'input',\n          attributes: {\n            placeholder: '输入标签名',\n            defaultValue: tag ? tag.label : ''\n          }\n        }\n      }).then((value) => {\n        // 点击取消\n        if (value !== null) {\n          if (value !== '') {\n            tag ? this.updateTag(tag._id, value) : this.addTag(value);\n          } else {\n            // 标签名输入为空\n            this.$notify.warning('标签名不能为空');\n          }\n        }\n      });\n    },\n    openDeleteTagDialog(tag) {\n      this.$alert({\n        title: '确定要删除此标签吗？',\n        text: '一旦删除，您将不能撤销此操作',\n        icon: 'warning',\n        buttons: true,\n        dangerMode: true\n      }).then((value) => {\n        if (value) {\n          this.deleteTag(tag._id);\n        }\n      });\n    },\n    addTag(tagName) {\n      const { response } = this.$http({\n        url: `/tag`,\n        method: 'post',\n        data: {\n          label: tagName\n        },\n        showSuccessMsg: true,\n        showErrorMsg: true\n      });\n\n      response.then(\n        () => {},\n        () => {}\n      );\n    },\n    updateTag(tagId, tagLabel) {\n      const { response } = this.$http({\n        url: `/tag/${tagId}`,\n        method: 'put',\n        data: {\n          label: tagLabel\n        },\n        showSuccessMsg: true,\n        showErrorMsg: true\n      });\n\n      response.then(\n        () => {\n          this.$set(this.currentTag, 'label', tagLabel);\n        },\n        () => {}\n      );\n    },\n    deleteTag(tagId) {\n      const { response } = this.$http({\n        url: `/tag/${tagId}`,\n        method: 'delete',\n        showSuccessMsg: true,\n        showErrorMsg: true\n      });\n\n      response.then(\n        () => {\n          const index = this.tagList.indexOf(this.currentTag);\n          this.tagList.splice(index, 1);\n        },\n        () => {}\n      );\n    },\n    async expandChange(row, expandRows) {\n      row._expanded = !row._expanded;\n      if (row._expanded) {\n        // 展开状态\n        const articles = await this.getArticleByTagId(row._id);\n        this.$set(row, 'articles', articles);\n      }\n    }\n  }\n};\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=279bd83c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.vue?vue&type=style&index=0&id=279bd83c&scoped=true&lang=less&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"279bd83c\",\n  \"c4c07bce\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACVA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AAHA;AARA;AAeA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAfA;AAiBA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AADA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAOA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAJA;AAPA;AAcA;AACA;AACA;AACA;AACA;AAFA;AAFA;AAfA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAPA;AAUA;AAIA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAPA;AAUA;AAEA;AACA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAOA;AAEA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAnIA;AAxCA;;ACpEA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}