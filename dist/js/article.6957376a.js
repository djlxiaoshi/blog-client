(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{262:function(t,e,a){"use strict";a.r(e);var i=a(11),n=a.n(i),s=a(4),l=a.n(s),r=a(292),o=a(294),c=a.n(o),d=a(6),g=a(291),p=a.n(g),u={components:{VueShowdown:r.VueShowdown},data:function(){return{content:"",title:"",author:{},showdownHighlight:c.a,options:{omitExtraWLInCodeBlocks:!0,ghCodeBlocks:!0},openTags:!1,articleTags:[],selectTags:[]}},asyncData:function(t){var e=t.store,a=t.route;return e.dispatch("getArticle",a.params.id)},mounted:function(){this.getArticle(this.$route.params.id)},computed:l()({},Object(d.d)(["article","user","tags"])),methods:l()({},Object(d.b)(["getArticle","getAllTags"]),{formatTime:function(t){return t?p()(t).format("YYYY-MM-DD"):""},isChecked:function(t){var e=!!this.article.tags.find(function(e){return e._id===t._id});return console.log(t.label,e,void 0===e?"undefined":n()(e)),e},toggleTags:function(){this.openTags=!this.openTags,this.tags&&0!==this.tags.length||this.getAllTags()},editArticle:function(){this.$router.push("/post/"+this.$route.params.id)},userConfirm:function(){var t=this;this.$alert({title:"警告",text:"您确定要删除这篇文章吗？",icon:"warning",buttons:!0,dangerMode:!0}).then(function(e){e&&t.deleteArticle()})},handleTagsParams:function(){this.saveArticleTags(this.articleTags)},saveArticleTags:function(t){var e=this;this.$http({url:"/article/"+this.$route.params.id,method:"put",data:{tags:t},showSuccessMsg:"标签设置成功",showErrorMsg:!0}).xhrInstance.then(function(){e.getArticle(e.$route.params.id),e.openTags=!1},function(){})},deleteArticle:function(){var t=this;this.$http({url:"/article/"+this.$route.params.id,method:"delete",showSuccessMsg:!0,showErrorMsg:!0}).xhrInstance.then(function(){t.$router.push("/")},function(){})}}),watch:{article:function(t){this.author=t.createUser,this.articleTags=t.tags.map(function(t){return t._id})}}},v=(a(515),a(9)),h=Object(v.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view-article-page"},[a("el-row",{attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{xs:24,sm:23,md:17,lg:18,xl:19}},[a("div",{staticClass:"page-left"},[a("h1",{staticClass:"article-title"},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"article-details"},[a("span",{staticClass:"details-item"},[t._v(t._s(t.formatTime(t.article.createTime)))]),t._v(" "),a("span",{staticClass:"details-item"},[t._v("字数 "+t._s(t.article.wordCount))]),t._v(" "),a("span",{staticClass:"details-item"},[t._v("阅读 "+t._s(t.article.views))]),t._v(" "),t.user.baseInfo&&t.user.baseInfo._id===t.author._id?a("span",{staticClass:"operate-wrap"},[a("span",{staticClass:"edit",on:{click:t.editArticle}},[t._v("编辑文章")]),t._v(" "),a("span",{staticClass:"delete",on:{click:t.userConfirm}},[t._v("删除文章")])]):t._e()]),t._v(" "),a("div",{staticClass:"article-tags"},[a("div",{staticClass:"selected-tags"},[t._l(t.article.tags,function(e){return a("el-tag",{key:e._id,attrs:{size:"mini"}},[t._v(t._s(e.label))])}),t._v(" "),t.user.baseInfo&&t.user.baseInfo._id===t.author._id?a("span",{staticClass:"tags-setting",on:{click:t.toggleTags}},[t._v("标签设置")]):t._e()],2),t._v(" "),t.openTags?a("div",{staticClass:"all-tags"},[a("div",{staticClass:"selector-body"},[a("el-checkbox-group",{model:{value:t.articleTags,callback:function(e){t.articleTags=e},expression:"articleTags"}},t._l(t.tags,function(e){return a("el-checkbox-button",{key:e._id,attrs:{label:e._id}},[t._v("\n                  "+t._s(e.label))])}),1)],1),t._v(" "),a("div",{staticClass:"selector-footer"},[a("el-button",{attrs:{size:"mini",round:""},on:{click:t.toggleTags}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"mini",round:""},on:{click:t.handleTagsParams}},[t._v("保存")])],1)]):t._e()]),t._v(" "),a("div",{staticClass:"article-content"},[a("VueShowdown",{staticClass:"markdown-preview",attrs:{vueTemplate:!0,markdown:t.article.content||"",flavor:"github",extensions:[t.showdownHighlight],options:t.options}})],1)])]),t._v(" "),a("el-col",{staticClass:"hidden-sm-and-down",attrs:{md:6,lg:5,xl:4}},[a("div",{staticClass:"page-right"})])],1)],1)},[],!1,null,"738d8307",null);e.default=h.exports},280:function(t,e,a){var i=a(516);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(3).default)("3ad60519",i,!0,{})},515:function(t,e,a){"use strict";var i=a(280);a.n(i).a},516:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,".view-article-page .page-left[data-v-738d8307] {\n  padding: 10px;\n}\n.view-article-page .page-left .article-title[data-v-738d8307] {\n  margin-bottom: 30px;\n  text-align: center;\n  font-size: 20px;\n}\n.view-article-page .page-left .article-details[data-v-738d8307] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n  color: #969696;\n  font-size: 13px;\n}\n.view-article-page .page-left .article-details .details-item[data-v-738d8307] {\n  margin-right: 8px;\n}\n.view-article-page .page-left .article-details .operate-wrap[data-v-738d8307] {\n  margin-left: auto;\n}\n.view-article-page .page-left .article-details .operate-wrap .edit[data-v-738d8307] {\n  cursor: pointer;\n  margin-right: 8px;\n}\n.view-article-page .page-left .article-details .operate-wrap .delete[data-v-738d8307] {\n  cursor: pointer;\n  color: red;\n}\n.view-article-page .page-left .selected-tags[data-v-738d8307] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n}\n.view-article-page .page-left .selected-tags .tags-setting[data-v-738d8307] {\n  margin-left: auto;\n  font-size: 12px;\n  cursor: pointer;\n  text-decoration: underline;\n}\n.view-article-page .page-left .selected-tags[data-v-738d8307] .el-tag {\n  margin: 2px;\n}\n.view-article-page .page-left .all-tags[data-v-738d8307] {\n  padding: 10px;\n  border: 1px solid #e5e5e5;\n  border-radius: 8px;\n}\n.view-article-page .page-left .all-tags .selector-body[data-v-738d8307] {\n  margin-bottom: 5px;\n}\n.view-article-page .page-left .all-tags .selector-body[data-v-738d8307] .el-checkbox-button {\n  margin: 2px 4px;\n}\n.view-article-page .page-left .all-tags .selector-body[data-v-738d8307] .el-checkbox-button .el-checkbox-button__inner {\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  padding: 5px 8px;\n  font-size: 12px;\n}\n.view-article-page .page-left .all-tags .selector-body[data-v-738d8307] .el-checkbox-button.is-checked .el-checkbox-button__inner {\n  box-shadow: none !important;\n}\n.view-article-page .page-left .all-tags .selector-footer[data-v-738d8307] {\n  text-align: right;\n}\n.view-article-page .page-left .all-tags .selector-footer[data-v-738d8307] .el-button {\n  padding: 3px 8px;\n}\n.view-article-page .page-left .article-content[data-v-738d8307] {\n  margin-top: 30px;\n  height: 100%;\n}\n.view-article-page .page-right[data-v-738d8307] {\n  height: 100px;\n  border: 1px solid #dddddd;\n}\n",""])}}]);