(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{359:function(t,e,n){var content=n(362);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(17).default)("f30e90d4",content,!0,{sourceMap:!1})},360:function(t,e,n){t.exports=n.p+"img/loading.b0d58bb.svg"},361:function(t,e,n){"use strict";n(359)},362:function(t,e,n){(e=n(16)(!1)).push([t.i,".app-loading{display:flex;align-items:center;justify-content:center;height:100%;width:100%}.app-loading img{width:15%}.app-loading img.mini{width:5%}.app-loading img.small{width:10%}.app-loading img.normal{width:15%}.app-loading img.large{width:20%}",""]),t.exports=e},363:function(t,e,n){"use strict";n(57);var o={props:{size:{type:String,default:"normal",validator:function(t){return["mini","small","normal","large"].includes(t)?t:(console.warn("size 属性只能为mini|small|normal|large"),"normal")}}}},r=(n(361),n(9)),component=Object(r.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-loading"},[e("img",{class:[this.size],attrs:{src:n(360),alt:""}})])}),[],!1,null,null,null);e.a=component.exports},405:function(t,e,n){var content=n(637);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(17).default)("eaecfeb2",content,!0,{sourceMap:!1})},636:function(t,e,n){"use strict";n(405)},637:function(t,e,n){(e=n(16)(!1)).push([t.i,".author-info-page[data-v-130761f2]{padding:20px}.author-info-page[data-v-130761f2] .el-upload{text-align:left}.author-info-page .avatar-image[data-v-130761f2]{width:100px;height:100px;border:1px solid #e5e5e5}.author-info-page .error-slot[data-v-130761f2]{height:100%;display:flex;align-items:center;justify-content:center}.author-info-page[data-v-130761f2] .el-form-item{margin-bottom:15px}.author-info-page[data-v-130761f2] .el-form-item__label{padding-bottom:0;font-weight:700}",""]),t.exports=e},682:function(t,e,n){"use strict";n.r(e);var o={meta:{isAdminPage:!0},head:{title:"用户信息",titleTemplate:"%s - DJL箫氏的博客!",htmlAttrs:{lang:"en",amp:!0},meta:[{hid:"description",name:"description",content:"用户信息页面"}]},components:{AppLoading:n(363).a},data:function(){return{isEditStatus:!1,rules:{username:[{required:!0,trigger:"blur",message:"请输入用户名"}],email:[{required:!0,trigger:"blur",message:"请输入邮箱"},{trigger:"blur",validator:function(t,e,n){e=e.trim();/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)?n():n(new Error("请输入正确的邮箱地址"))}}]},inputStatus:{usernameDisabled:!0,infoDisabled:!0},userInfo:{avatar:""},copyUserInfo:{}}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var t=this;return this.$http({url:"/user",data:{}}).response.then((function(e){t.userInfo=e,t.copyUserInfo=JSON.parse(JSON.stringify(e))}),(function(t){throw t}))},handleSuccess:function(t){this.userInfo.avatar="".concat(t.data.avatar,"?v=").concat((new Date).getTime()),this.$notify.success("上传成功")},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,n="image/png"===t.type,o=t.size/1024<300;return e||n||this.$notify.error("上传头像图片只能是 JPG或者PNG 格式!"),o||this.$notify.error("上传头像图片大小不能超过 300KB!"),(e||n)&&o},toggleEditStatus:function(){this.isEditStatus=!this.isEditStatus},save:function(){var t=this;this.$refs.form.validate((function(e){e&&t.updateUserInfo().then((function(e){t.userInfo=e,t.isEditStatus=!1}))}))},updateUserInfo:function(){return this.$http({url:"/user",method:"put",data:{info:this.copyUserInfo.info,username:this.copyUserInfo.username,email:this.copyUserInfo.email,github:this.copyUserInfo.github,juejin:this.copyUserInfo.juejin,jianshu:this.copyUserInfo.jianshu,wechat:this.copyUserInfo.wechat},showErrorMsg:!0,showSuccessMsg:!0}).response}}},r=(n(636),n(9)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"author-info-page"},[n("el-row",{attrs:{type:"flex"}},[n("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[n("el-form",{ref:"form",attrs:{rules:t.rules,model:t.copyUserInfo,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"头像",prop:"url"}},[n("el-upload",{ref:"upload",staticClass:"upload-avatar-input",attrs:{action:t.$globalConfig.SERVER_ADDRESS+"/api/user/avatar/test","with-credentials":!0,"show-file-list":!1,"before-upload":t.beforeAvatarUpload,"on-success":t.handleSuccess,"list-type":"text"}},[n("el-image",{staticClass:"avatar-image",attrs:{src:t.userInfo.avatar}},[n("AppLoading",{staticClass:"image-slot",attrs:{slot:"placeholder",size:"large"},slot:"placeholder"}),t._v(" "),n("div",{staticClass:"error-slot",attrs:{slot:"error"},slot:"error"},[n("span",[t._v("点击上传")])])],1)],1)],1),t._v(" "),n("el-form-item",{staticClass:"username-input-item",attrs:{label:"用户名",prop:"username"}},[t.isEditStatus?n("el-input",{model:{value:t.copyUserInfo.username,callback:function(e){t.$set(t.copyUserInfo,"username",e)},expression:"copyUserInfo.username"}}):n("span",[t._v(t._s(t.userInfo.username))])],1),t._v(" "),n("el-form-item",{staticClass:"username-input-item",attrs:{label:"用户邮箱",prop:"email"}},[t.isEditStatus?n("el-input",{model:{value:t.copyUserInfo.email,callback:function(e){t.$set(t.copyUserInfo,"email",e)},expression:"copyUserInfo.email"}}):n("span",[t._v(t._s(t.userInfo.email))])],1),t._v(" "),n("el-form-item",{staticClass:"username-input-item",attrs:{label:"微信",prop:"wechat"}},[t.isEditStatus?n("el-input",{model:{value:t.copyUserInfo.wechat,callback:function(e){t.$set(t.copyUserInfo,"wechat",e)},expression:"copyUserInfo.wechat"}}):n("span",[t._v(t._s(t.userInfo.wechat))])],1),t._v(" "),n("el-form-item",{staticClass:"username-input-item",attrs:{label:"Github",prop:"github"}},[t.isEditStatus?n("el-input",{model:{value:t.copyUserInfo.github,callback:function(e){t.$set(t.copyUserInfo,"github",e)},expression:"copyUserInfo.github"}}):n("span",[t._v(t._s(t.userInfo.github))])],1),t._v(" "),n("el-form-item",{staticClass:"username-input-item",attrs:{label:"掘金",prop:"juejin"}},[t.isEditStatus?n("el-input",{model:{value:t.copyUserInfo.juejin,callback:function(e){t.$set(t.copyUserInfo,"juejin",e)},expression:"copyUserInfo.juejin"}}):n("span",[t._v(t._s(t.userInfo.juejin))])],1),t._v(" "),n("el-form-item",{staticClass:"username-input-item",attrs:{label:"简书",prop:"jianshu"}},[t.isEditStatus?n("el-input",{model:{value:t.copyUserInfo.jianshu,callback:function(e){t.$set(t.copyUserInfo,"jianshu",e)},expression:"copyUserInfo.jianshu"}}):n("span",[t._v(t._s(t.userInfo.jianshu))])],1),t._v(" "),n("el-form-item",{staticClass:"user-info-input-item",attrs:{label:"个人介绍"}},[t.isEditStatus?n("el-input",{attrs:{rows:6,type:"textarea"},model:{value:t.copyUserInfo.info,callback:function(e){t.$set(t.copyUserInfo,"info",e)},expression:"copyUserInfo.info"}}):n("span",[t._v(t._s(t.userInfo.info))])],1),t._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-button",{attrs:{type:"default",size:"small",plain:""},on:{click:t.toggleEditStatus}},[t._v("\n            "+t._s(t.isEditStatus?"取消":"编辑")+"\n          ")]),t._v(" "),t.isEditStatus?n("el-button",{attrs:{type:"success",size:"small",plain:""},on:{click:t.save}},[t._v("\n            保存\n          ")]):t._e()],1)],1)],1)],1)],1)}),[],!1,null,"130761f2",null);e.default=component.exports}}]);